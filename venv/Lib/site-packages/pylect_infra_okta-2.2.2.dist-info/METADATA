Metadata-Version: 2.2
Name: pylect_infra_okta
Version: 2.2.2
Summary: Wrapper for Okta authentication
Author: Infrastructure Operations Team
Author-email: devops@annalect.com
Classifier: Programming Language :: Python :: 3
Classifier: Operating System :: OS Independent
Description-Content-Type: text/markdown
Requires-Dist: gimme-aws-creds==2.4.3
Requires-Dist: boto3
Requires-Dist: aws_requests_auth
Requires-Dist: requests
Requires-Dist: urllib3<2
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: requires-dist
Dynamic: summary

# pylect-infra

### Installation

* Install the python package:

```

$ pip3 install git+ssh://git@bitbucket.org/annalect/pylect-infra-okta.git@v.2.x --upgrade [--user]

```
or

```

$ pip3 install git+https://<user_name>@bitbucket.org/annalect/pylect-infra-okta.git@v.2.x --upgrade [--user]

```

# pylect-infra: okta module setup Guide
### Configuration

* See the help

    $ pokta -h
    usage: pylect-infra-okta [-h] [-r] [-s] [-d] [-u]

    Description

    optional arguments:
    -h, --help           show this help message and exit
    -r, --remove-creds   Remove local temporary credentials. This option only deletes locally saved credentials, it does not log out from Okta the temporary session token.
    -s, --setup          Setup pylect-infra-okta for use
    -d, --debug_options  Debug options passed and exit
    -u, --update_string  Show update string and exit

* Run the command:

```
$ pylect-infra-okta-setup
```
---
### IMPORTANT NOTE:
During the initial setup, running `pylect-infra-okta-setup` will prompt user to input their email. Do **NOT** append the "@annalect.com" if you are running `v.2.x` of `pylect-infra-okta`.

ex: input `firstname.lastname`, **NOT** `firstname.lastname@company.com`.

Inputing `firstname.lastname@company.com` will result in an error.


---
### Available commands:
- pokta as a shortcut for pylect-infra-okta
- pylect-infra-okta-setup: initial setup
- pylect-infra-okta: to obtain credentials
- pylect-infra-okta-remove-credentials: to remove credentials from local profile.

### Example

```
$ pylect-infra-okta-setup
Default configuration file alreay exists. Overwrite? y/N: y
Please input you Global email (e.g.: my.email@annalect.com) jane.doe@annalect.com


******************************
Instructions:
Get your Okta credentials by running command: pylect-infra-okta
See your available roles by running: pylect-infra-okta --action-list-roles
Use one of your roles with the AWS CLI as, e.g.: aws --profile My-Role-Name s3 ls s3://mybucket/folder/

```

## Usage

* Get your Okta credentials by running command:

```
pylect-infra-okta

```

* See your available roles by running:

```

pylect-infra-okta --action-list-roles

```

* Verify your setup with a simple command:

```
aws --profile <role-name> sts get-caller-identity

```

* Remove you local credentials:
```

pylect-infra-okta-remove-credentials

```
